<?php

$topCatalogs = array
(
		array(
				"id" => 1,
				"width" => 370,
				"columnname" => "动作",
				"columnurl" => "/catalog/dongzuo",
				"style" => "1"
		),
		array(
				"id" => 2,
				"width" => 370,
				"columnname" => "体育",
				"style" => "1",
				"columnurl" => "/catalog/yundong",
		),
		array(
				"id" => 3,
				"width" => 370,
				"columnname" => "益智",
				"style" => "2",
				"columnurl" => "/catalog/yizhi",
		),
		array(
				"id" => 4,
				"width" => 370,
				"columnname" => "射击",
				"style" => "2",
				"columnurl" => "/catalog/sheji",
		),
		array(
				"id" => 5,
				"width" => 370,
				"columnname" => "搞笑",
				"style" => "2",
				"columnurl" => "/catalog/yule",
		),
		array(
				"id" => 6,
				"width" => 370,
				"columnname" => "冒险",
				"style" => "1",
				"columnurl" => "/catalog/maoxian",
		),
		array(
				"id" => 7,
				"width" => 370,
				"columnname" => "棋牌",
				"columnurl" => "/catalog/qipai",
				"style" => "1"
		),
		array(
				"id" => 8,
				"width" => 370,
				"columnname" => "策略",
				"columnurl" => "/catalog/celue",
				"style" => "2"
		),
		array(
				"id" => 10,
				"width" => 370,
				"columnname" => "休闲",
				"columnurl" => "/catalog/xiuxiang",
				"style" => "2"
		),
		array(
				"id" => 11,
				"width" => 370,
				"columnname" => "装扮",
				"columnurl" => "/catalog/zhuangban",
				"style" => "2"
		),
		array(
				"id" => 0,
				"width" => 852,
				"columnname" => "视频",
				"columnurl" => "/video",
				"style" => "2"
		),
);

$games = array(
array("id" => 1,"name" => "火柴人龙虎兄弟","url" => "600946"),
array("id" => 1,"name" => "地下城与勇士阿拉德战记","url" => "600950"),
array("id" => 1,"name" => "闪客快打6-毒刺计划","url" => "601080","color" => "red"),
array("id" => 1,"name" => "僵尸城市大营救","url" => "600985"),
array("id" => 1,"name" => "僵尸捕杀者2时光机器中文版","url" => "601043"),
array("id" => 1,"name" => "王的圣殿骑士","url" => "601104"),
array("id" => 1,"name" => "兔宝宝红旗保卫战2中文版","url" => "601152"),

array("id" => 2,"name" => "疯狂特技大脚车","url" => "600934"),
array("id" => 2,"name" => "地狱骷髅骑车","url" => "601158"),
array("id" => 2,"name" => "双人UFO卡丁车","url" => "601075"),
array("id" => 2,"name" => "僵尸特技单车","url" => "601102"),
array("id" => 2,"name" => "汽车沙漠之旅","url" => "601106"),
array("id" => 2,"name" => "小黄人躲冰雹","url" => "601148"),
array("id" => 2,"name" => "怪兽特技大脚车","url" => "601159"),

array("id" => 3,"name" => "蜗牛找房子6","url" => "600899"),
array("id" => 3,"name" => "拯救小伙伴选关版","url" => "601100"),
array("id" => 3,"name" => "亚当寻找夏娃2","url" => "600927"),
array("id" => 3,"name" => "捣蛋猪3.4","url" => "600906"),
//array("id" => 3,"name" => "割绳子2捣蛋猪版","url" => "600975"),
//array("id" => 3,"name" => "2048数字组合","url" => "600987"),
//array("id" => 3,"name" => "史莱姆实验室2","url" => "601024"),

array("id" => 4,"name" => "穿越火线之全面开战","url" => "601044"),
array("id" => 4,"name" => "捣蛋猪射小鸟","url" => "601058"),
array("id" => 4,"name" => "TH穿越火线1.2","url" => "601101"),
array("id" => 4,"name" => "CF之金枪暴力街区4","url" => "601094"),
array("id" => 4,"name" => "最后一颗子弹3","url" => "601122"),
array("id" => 4,"name" => "陆军特工队2","url" => "601035"),
array("id" => 4,"name" => "生化火线","url" => "601039"),

array("id" => 5,"name" => "找你妹","url" => "600981"),
array("id" => 5,"name" => "妈妈再打我一次","url" => "600983"),
array("id" => 5,"name" => "史上最贱的游戏3","url" => "600990"),
array("id" => 5,"name" => "恶整美女老师","url" => "600998"),
array("id" => 5,"name" => "啪啪啪","url" => "406357"),
array("id" => 5,"name" => "砸飞你最讨厌的人","url" => "406385"),
array("id" => 5,"name" => "踢小人中文版","url" => "406421"),

array("id" => 6,"name" => "小怪兽大冒险","url" => "601141"),
array("id" => 6,"name" => "恐龙公路大冒险","url" => "601111"),
array("id" => 6,"name" => "DNF2.8","url" => "601019","color" => "red"),
array("id" => 6,"name" => "冰火精灵大冒险中文版","url" => "600933"),
array("id" => 6,"name" => "进击的巨人猎手0.1","url" => "600961"),
array("id" => 6,"name" => "暗夜探险2","url" => "600948"),
array("id" => 6,"name" => "群英三国志","url" => "600937"),

array("id" => 7,"name" => "罗小黑五子棋","url" => "137338"),
array("id" => 7,"name" => "Q版国际象棋","url" => "136900"),
array("id" => 7,"name" => "中国豪华象棋","url" => "136859","color" => "red"),
array("id" => 7,"name" => "黄金蜘蛛纸牌","url" => "137303"),
//array("id" => 7,"name" => "赌场杰克大亨","url" => "136598"),
//array("id" => 7,"name" => "欢喜对对碰","url" => "136599"),
//array("id" => 7,"name" => "怪卡牌坊","url" => "136606"),

array("id" => 8,"name" => "保卫萝卜挑战版2","url" => "600932","color" => "red"),
array("id" => 8,"name" => "皇家守卫军前线中文版","url" => "600902"),
array("id" => 8,"name" => "史上最贱的游戏4","url" => "600978"),
//array("id" => 8,"name" => "大炮篮球2","url" => "601143"),
//array("id" => 8,"name" => "无腿求生","url" => "601071"),
//array("id" => 8,"name" => "地狱下油锅","url" => "601063"),
//array("id" => 8,"name" => "鼹鼠吃糖果加强选关版","url" => "600982"),

array("id" => 10,"name" => "小黄人矿工","url" => "601013"),
array("id" => 10,"name" => "绘画达人","url" => "601036"),
array("id" => 10,"name" => "当爱化作翅膀","url" => "601089"),
array("id" => 10,"name" => "2048星际探索","url" => "601115"),
//array("id" => 10,"name" => "机器人爱酷跑","url" => "601128"),
//array("id" => 10,"name" => "蜡笔小新打屁股","url" => "601002"),
array("id" => 10,"name" => "天天爱消除","url" => "601026","color" => "red"),

array("id" => 11,"name" => "公主的新装","url" => "190834"),
array("id" => 11,"name" => "摇滚潮流","url" => "149336"),
array("id" => 11,"name" => "草莓公主爱打扮","url" => "190741"),
array("id" => 11,"name" => "彩梦芭蕾","url" => "191037"),
//array("id" => 11,"name" => "公主马里奥","url" => "191407"),
array("id" => 11,"name" => "情侣装扮","url" => "191531"),
array("id" => 11,"name" => "多爱","url" => "191674"),

array("id" => 0,"name" => "蜡笔小新","url" => "14" ,"color" => "red"),
array("id" => 0,"name" => "十万个冷笑话","url" => "327"),
array("id" => 0,"name" => "撸时代","url" => "342"),
array("id" => 0,"name" => "暴走大事件","url" => "355"),
array("id" => 0,"name" => "哐哐日记","url" => "366"),
array("id" => 0,"name" => "罗小黑战记","url" => "379"),
array("id" => 0,"name" => "死灵编码","url" => "388"),
array("id" => 0,"name" => "史上最贱的游戏2","url" => "5","color" => "red"),
array("id" => 0,"name" => "保卫萝卜2攻略","url" => "11"),
array("id" => 0,"name" => "亚当寻找夏娃2","url" => "7"),

);

//读取每一个catalog对应的子元素
require_once 'game/protected/models/Subject.php';
function getCatalogSubjects($games,$catalogId){
	//global $games;
	//$subjectLoader = new Subject();
	//return $subjectLoader->getSubjectByCategory($catalogId);
	$result = array();
	$index = 0;
	foreach($games as $game){
		if($game['id'] == $catalogId){
			$result[$index] = $game;
			$index++;
			//$result = array_push($result, $game); 
		}
	}
	return $result;
}

for( $index = 0; $index < count($topCatalogs); $index++ ){
	$topCatalog = $topCatalogs[$index];
	$subjects = getCatalogSubjects($games,$topCatalog['id']);
	
	for( $subjectindex = 0; $subjectindex < count($subjects); $subjectindex++  ){
		$subject = $subjects[$subjectindex];
		if($topCatalog['id'] == 0){
			$subjects[$subjectindex]['url'] = "/video/" . $subjects[$subjectindex]['url'] . ".html";
		}else{
			$subjects[$subjectindex]['url'] = "/game/" . $subjects[$subjectindex]['url'] . ".html";
		}
	}
	
	$topCatalogs[$index]['followdata'] = $subjects;
}
